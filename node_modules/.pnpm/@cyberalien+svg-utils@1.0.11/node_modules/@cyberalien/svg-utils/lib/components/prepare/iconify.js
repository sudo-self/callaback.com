import { convertSVGContentToCSSRules } from "../../svg-css/content.js";
import { getGeneratedAssetFilename } from "../helpers/filenames/asset.js";
import { normaliseIconifyIcon } from "../../iconify/icon/nornalise.js";

/**
* Convert IconifyIcon data to FactoryIconData
*/
function convertIconifyIconToFactoryContent(icon, prefix, name, options) {
	const { body, viewBox } = normaliseIconifyIcon(icon);
	const fallbackOption = options?.fallback ?? true;
	const fallback = typeof fallbackOption === "string" ? fallbackOption : fallbackOption ? `${prefix}:${name}` : void 0;
	return {
		prefix,
		name,
		viewBox,
		icon: convertSVGContentToCSSRules(body, options),
		fallback
	};
}
/**
* Create metadata assets for an icon set
*/
function getIconifyIconsetMetadataAsset(iconSet, rootPath) {
	const assets = [];
	const { prefix, info, lastModified } = iconSet;
	const metadata = {
		prefix,
		info,
		lastModified
	};
	assets.push({
		...getGeneratedAssetFilename("iconify.json", rootPath),
		content: JSON.stringify(metadata, null, "	") + "\n"
	});
	return assets;
}

export { convertIconifyIconToFactoryContent, getIconifyIconsetMetadataAsset };